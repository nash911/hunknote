{
  "id": "py_large_refactor_class_rename_20_consumers",
  "language": "python",
  "name": "Python: Cascading multi-layer refactor \u2014 40 files, 125 hunks",
  "description": "A 6-layer cascading refactor where each layer has DIFFERENT rename patterns: (1) models/base.py: BaseModel->Entity, to_dict()->serialize(), find_by_id()->get_by_id(). (2) models/mixins.py: TimestampMixin->AuditMixin, touch()->mark_updated(). (3) Each model file: User.get_name()->display_name(), Product.get_price()->unit_price(), Order.get_total()->compute_total(), Category.get_path()->full_path(). (4) Serializers: format()->render() on each model serializer. (5) API decorators: @api_view->@endpoint. (6) Services: each renames its own helper (validate_session->verify_session, etc.). (7) Tests reference ALL layers. ALL 32 files with renames must be in a single commit. The LLM is tempted to split by layer (models, serializers, views, services, tests) because each layer has distinct rename patterns. But every split breaks cascading deps.",
  "difficulty": "hyper_hard",
  "category": "cascading_multi_layer_refactor",
  "num_files": 40,
  "num_hunks": 125,
  "file_diffs": [
    {
      "file_path": "models/base.py",
      "hunks": [
        {
          "id": "H1_hh0301",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "-class BaseModel:",
            "+class Entity:",
            "     id = Column(Integer, primary_key=True)",
            "     created_at = Column(DateTime, default=datetime.utcnow)"
          ]
        },
        {
          "id": "H2_hh0302",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-    def to_dict(self):",
            "+    def serialize(self):",
            "         return {c.name: getattr(self, c.name) for c in self.__table__.columns}"
          ]
        },
        {
          "id": "H3_hh0303",
          "header": "@@ -10,5 +10,8 @@",
          "lines": [
            "-    @classmethod",
            "-    def find_by_id(cls, id):",
            "+    @classmethod",
            "+    def get_by_id(cls, id):",
            "         return cls.query.get(id)"
          ]
        }
      ]
    },
    {
      "file_path": "models/mixins.py",
      "hunks": [
        {
          "id": "H4_hh0304",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-class TimestampMixin:",
            "+class AuditMixin:",
            "     updated_at = Column(DateTime, onupdate=datetime.utcnow)"
          ]
        },
        {
          "id": "H5_hh0305",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-    def touch(self):",
            "+    def mark_updated(self):",
            "         self.updated_at = datetime.utcnow()"
          ]
        }
      ]
    },
    {
      "file_path": "models/user.py",
      "hunks": [
        {
          "id": "H6_hh0306",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.base import BaseModel",
            "+from models.base import Entity"
          ]
        },
        {
          "id": "H7_hh0307",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.mixins import TimestampMixin",
            "+from models.mixins import AuditMixin"
          ]
        },
        {
          "id": "H8_hh0308",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-class User(BaseModel, TimestampMixin):",
            "+class User(Entity, AuditMixin):",
            "     email = Column(String, unique=True)"
          ]
        },
        {
          "id": "H9_hh0309",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-    def get_name(self):",
            "+    def display_name(self):",
            "         return f'{self.first_name} {self.last_name}'"
          ]
        }
      ]
    },
    {
      "file_path": "models/product.py",
      "hunks": [
        {
          "id": "H10_hh030a",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.base import BaseModel",
            "+from models.base import Entity"
          ]
        },
        {
          "id": "H11_hh030b",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "-class Product(BaseModel):",
            "+class Product(Entity):",
            "     name = Column(String)",
            "     price = Column(Float)"
          ]
        },
        {
          "id": "H12_hh030c",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-    def get_price(self, currency='USD'):",
            "+    def unit_price(self, currency='USD'):",
            "         return convert(self.price, currency)"
          ]
        }
      ]
    },
    {
      "file_path": "models/order.py",
      "hunks": [
        {
          "id": "H13_hh030d",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.base import BaseModel",
            "+from models.base import Entity"
          ]
        },
        {
          "id": "H14_hh030e",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.mixins import TimestampMixin",
            "+from models.mixins import AuditMixin"
          ]
        },
        {
          "id": "H15_hh030f",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-class Order(BaseModel, TimestampMixin):",
            "+class Order(Entity, AuditMixin):",
            "     user_id = Column(Integer, ForeignKey('user.id'))"
          ]
        },
        {
          "id": "H16_hh0310",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-    def get_total(self):",
            "+    def compute_total(self):",
            "         return sum(item.subtotal for item in self.items)"
          ]
        },
        {
          "id": "H17_hh0311",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "-    def summary(self):",
            "-        return {'total': self.get_total(), **self.to_dict()}",
            "+    def summary(self):",
            "+        return {'total': self.compute_total(), **self.serialize()}"
          ]
        }
      ]
    },
    {
      "file_path": "models/category.py",
      "hunks": [
        {
          "id": "H18_hh0312",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.base import BaseModel",
            "+from models.base import Entity"
          ]
        },
        {
          "id": "H19_hh0313",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-class Category(BaseModel):",
            "+class Category(Entity):",
            "     name = Column(String)"
          ]
        },
        {
          "id": "H20_hh0314",
          "header": "@@ -16,5 +16,8 @@",
          "lines": [
            "-    def get_path(self):",
            "+    def full_path(self):",
            "         parts = []",
            "         node = self",
            "         while node:",
            "             parts.append(node.name)",
            "             node = node.parent",
            "         return '/'.join(reversed(parts))"
          ]
        }
      ]
    },
    {
      "file_path": "models/__init__.py",
      "hunks": [
        {
          "id": "H21_hh0315",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.base import BaseModel",
            "+from models.base import Entity"
          ]
        },
        {
          "id": "H22_hh0316",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.mixins import TimestampMixin",
            "+from models.mixins import AuditMixin"
          ]
        },
        {
          "id": "H23_hh0317",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-__all__ = ['BaseModel', 'TimestampMixin', 'User', 'Product', 'Order', 'Category']",
            "+__all__ = ['Entity', 'AuditMixin', 'User', 'Product', 'Order', 'Category']"
          ]
        }
      ]
    },
    {
      "file_path": "serializers/user_serializer.py",
      "hunks": [
        {
          "id": "H24_hh0318",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H25_hh0319",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "-class UserSerializer:",
            "+class UserSerializer:",
            "-    def format(self, obj: BaseModel) -> dict:",
            "+    def render(self, obj: Entity) -> dict:",
            "-        data = obj.to_dict()",
            "+        data = obj.serialize()"
          ]
        },
        {
          "id": "H26_hh031a",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-        data['user_label'] = obj.get_name()",
            "+        data['user_label'] = obj.display_name()"
          ]
        }
      ]
    },
    {
      "file_path": "serializers/product_serializer.py",
      "hunks": [
        {
          "id": "H27_hh031b",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H28_hh031c",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "-class ProductSerializer:",
            "+class ProductSerializer:",
            "-    def format(self, obj: BaseModel) -> dict:",
            "+    def render(self, obj: Entity) -> dict:",
            "-        data = obj.to_dict()",
            "+        data = obj.serialize()"
          ]
        },
        {
          "id": "H29_hh031d",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-        data['product_label'] = obj.get_price()",
            "+        data['product_label'] = obj.unit_price()"
          ]
        }
      ]
    },
    {
      "file_path": "serializers/order_serializer.py",
      "hunks": [
        {
          "id": "H30_hh031e",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H31_hh031f",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "-class OrderSerializer:",
            "+class OrderSerializer:",
            "-    def format(self, obj: BaseModel) -> dict:",
            "+    def render(self, obj: Entity) -> dict:",
            "-        data = obj.to_dict()",
            "+        data = obj.serialize()"
          ]
        },
        {
          "id": "H32_hh0320",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-        data['order_label'] = obj.get_total()",
            "+        data['order_label'] = obj.compute_total()"
          ]
        }
      ]
    },
    {
      "file_path": "serializers/category_serializer.py",
      "hunks": [
        {
          "id": "H33_hh0321",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H34_hh0322",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "-class CategorySerializer:",
            "+class CategorySerializer:",
            "-    def format(self, obj: BaseModel) -> dict:",
            "+    def render(self, obj: Entity) -> dict:",
            "-        data = obj.to_dict()",
            "+        data = obj.serialize()"
          ]
        },
        {
          "id": "H35_hh0323",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-        data['category_label'] = obj.get_path()",
            "+        data['category_label'] = obj.full_path()"
          ]
        }
      ]
    },
    {
      "file_path": "serializers/__init__.py",
      "hunks": [
        {
          "id": "H36_hh0324",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from serializers.user_serializer import UserSerializer",
            "+from serializers.user_serializer import UserSerializer"
          ]
        }
      ]
    },
    {
      "file_path": "api/views/users.py",
      "hunks": [
        {
          "id": "H37_hh0325",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H38_hh0326",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from api.decorators import api_view",
            "+from api.decorators import endpoint"
          ]
        },
        {
          "id": "H39_hh0327",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-@api_view",
            "+@endpoint",
            " def list_users(request):"
          ]
        },
        {
          "id": "H40_hh0328",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "-    obj = User.find_by_id(request.id)",
            "+    obj = User.get_by_id(request.id)",
            "-    return obj.to_dict()",
            "+    return obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "api/views/products.py",
      "hunks": [
        {
          "id": "H41_hh0329",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H42_hh032a",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from api.decorators import api_view",
            "+from api.decorators import endpoint"
          ]
        },
        {
          "id": "H43_hh032b",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-@api_view",
            "+@endpoint",
            " def list_products(request):"
          ]
        },
        {
          "id": "H44_hh032c",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "-    obj = Product.find_by_id(request.id)",
            "+    obj = Product.get_by_id(request.id)",
            "-    return obj.to_dict()",
            "+    return obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "api/views/orders.py",
      "hunks": [
        {
          "id": "H45_hh032d",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H46_hh032e",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from api.decorators import api_view",
            "+from api.decorators import endpoint"
          ]
        },
        {
          "id": "H47_hh032f",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-@api_view",
            "+@endpoint",
            " def list_orders(request):"
          ]
        },
        {
          "id": "H48_hh0330",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "-    obj = Order.find_by_id(request.id)",
            "+    obj = Order.get_by_id(request.id)",
            "-    return obj.to_dict()",
            "+    return obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "api/views/admin.py",
      "hunks": [
        {
          "id": "H49_hh0331",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H50_hh0332",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from api.decorators import api_view",
            "+from api.decorators import endpoint"
          ]
        },
        {
          "id": "H51_hh0333",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-@api_view",
            "+@endpoint",
            " def list_admin(request):"
          ]
        },
        {
          "id": "H52_hh0334",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "-    obj = User.find_by_id(request.id)",
            "+    obj = User.get_by_id(request.id)",
            "-    return obj.to_dict()",
            "+    return obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "api/views/search.py",
      "hunks": [
        {
          "id": "H53_hh0335",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H54_hh0336",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from api.decorators import api_view",
            "+from api.decorators import endpoint"
          ]
        },
        {
          "id": "H55_hh0337",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-@api_view",
            "+@endpoint",
            " def list_search(request):"
          ]
        },
        {
          "id": "H56_hh0338",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "-    obj = Product.find_by_id(request.id)",
            "+    obj = Product.get_by_id(request.id)",
            "-    return obj.to_dict()",
            "+    return obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "api/views/reports.py",
      "hunks": [
        {
          "id": "H57_hh0339",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H58_hh033a",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from api.decorators import api_view",
            "+from api.decorators import endpoint"
          ]
        },
        {
          "id": "H59_hh033b",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "-@api_view",
            "+@endpoint",
            " def list_reports(request):"
          ]
        },
        {
          "id": "H60_hh033c",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "-    obj = Order.find_by_id(request.id)",
            "+    obj = Order.get_by_id(request.id)",
            "-    return obj.to_dict()",
            "+    return obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "api/decorators.py",
      "hunks": [
        {
          "id": "H61_hh033d",
          "header": "@@ -10,5 +10,8 @@",
          "lines": [
            "-def api_view(func):",
            "+def endpoint(func):",
            "     @wraps(func)",
            "     def wrapper(*args, **kwargs):",
            "         return func(*args, **kwargs)"
          ]
        }
      ]
    },
    {
      "file_path": "services/auth.py",
      "hunks": [
        {
          "id": "H62_hh033e",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel, User",
            "+from models import Entity, User"
          ]
        },
        {
          "id": "H63_hh033f",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "-def validate_session(obj):",
            "+def verify_session(obj):",
            "-    if isinstance(obj, BaseModel):",
            "+    if isinstance(obj, Entity):",
            "-        label = obj.get_name() if hasattr(obj, 'get_name') else str(obj)",
            "+        label = obj.display_name() if hasattr(obj, 'display_name') else str(obj)"
          ]
        },
        {
          "id": "H64_hh0340",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-    data = obj.to_dict()",
            "+    data = obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "services/billing.py",
      "hunks": [
        {
          "id": "H65_hh0341",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel, Order",
            "+from models import Entity, Order"
          ]
        },
        {
          "id": "H66_hh0342",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "-def calculate_invoice(obj):",
            "+def generate_invoice(obj):",
            "-    if isinstance(obj, BaseModel):",
            "+    if isinstance(obj, Entity):",
            "-        label = obj.get_total() if hasattr(obj, 'get_total') else str(obj)",
            "+        label = obj.compute_total() if hasattr(obj, 'compute_total') else str(obj)"
          ]
        },
        {
          "id": "H67_hh0343",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-    data = obj.to_dict()",
            "+    data = obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "services/shipping.py",
      "hunks": [
        {
          "id": "H68_hh0344",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel, Order",
            "+from models import Entity, Order"
          ]
        },
        {
          "id": "H69_hh0345",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "-def estimate_cost(obj):",
            "+def calculate_shipping(obj):",
            "-    if isinstance(obj, BaseModel):",
            "+    if isinstance(obj, Entity):",
            "-        label = obj.get_total() if hasattr(obj, 'get_total') else str(obj)",
            "+        label = obj.compute_total() if hasattr(obj, 'compute_total') else str(obj)"
          ]
        },
        {
          "id": "H70_hh0346",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-    data = obj.to_dict()",
            "+    data = obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "services/analytics.py",
      "hunks": [
        {
          "id": "H71_hh0347",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel, User",
            "+from models import Entity, User"
          ]
        },
        {
          "id": "H72_hh0348",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "-def track_event(obj):",
            "+def record_event(obj):",
            "-    if isinstance(obj, BaseModel):",
            "+    if isinstance(obj, Entity):",
            "-        label = obj.get_name() if hasattr(obj, 'get_name') else str(obj)",
            "+        label = obj.display_name() if hasattr(obj, 'display_name') else str(obj)"
          ]
        },
        {
          "id": "H73_hh0349",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-    data = obj.to_dict()",
            "+    data = obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "services/notifications.py",
      "hunks": [
        {
          "id": "H74_hh034a",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel, User",
            "+from models import Entity, User"
          ]
        },
        {
          "id": "H75_hh034b",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "-def send_alert(obj):",
            "+def dispatch_alert(obj):",
            "-    if isinstance(obj, BaseModel):",
            "+    if isinstance(obj, Entity):",
            "-        label = obj.get_name() if hasattr(obj, 'get_name') else str(obj)",
            "+        label = obj.display_name() if hasattr(obj, 'display_name') else str(obj)"
          ]
        },
        {
          "id": "H76_hh034c",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-    data = obj.to_dict()",
            "+    data = obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "cli/import_cmd.py",
      "hunks": [
        {
          "id": "H77_hh034d",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H78_hh034e",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.mixins import TimestampMixin",
            "+from models.mixins import AuditMixin"
          ]
        },
        {
          "id": "H79_hh034f",
          "header": "@@ -14,5 +14,8 @@",
          "lines": [
            " def import_data(path):",
            "-    for cls in BaseModel.__subclasses__():",
            "+    for cls in Entity.__subclasses__():",
            "-        if issubclass(cls, TimestampMixin):",
            "-            obj.touch()",
            "+        if issubclass(cls, AuditMixin):",
            "+            obj.mark_updated()"
          ]
        }
      ]
    },
    {
      "file_path": "tests/test_user.py",
      "hunks": [
        {
          "id": "H80_hh0350",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel, User",
            "+from models import Entity, User"
          ]
        },
        {
          "id": "H81_hh0351",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_model_creation():",
            "-    assert isinstance(obj, BaseModel)",
            "+    assert isinstance(obj, Entity)"
          ]
        },
        {
          "id": "H82_hh0352",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_serialization():",
            "-    data = obj.to_dict()",
            "+    data = obj.serialize()"
          ]
        },
        {
          "id": "H83_hh0353",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_user_method():",
            "-    result = obj.get_name()",
            "+    result = obj.display_name()"
          ]
        },
        {
          "id": "H84_hh0354",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_find():",
            "-    obj = User.find_by_id(1)",
            "+    obj = User.get_by_id(1)"
          ]
        },
        {
          "id": "H85_hh0355",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from services.user import validate_session",
            "+from services.user import verify_session"
          ]
        }
      ]
    },
    {
      "file_path": "tests/test_product.py",
      "hunks": [
        {
          "id": "H86_hh0356",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel, Product",
            "+from models import Entity, Product"
          ]
        },
        {
          "id": "H87_hh0357",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_model_creation():",
            "-    assert isinstance(obj, BaseModel)",
            "+    assert isinstance(obj, Entity)"
          ]
        },
        {
          "id": "H88_hh0358",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_serialization():",
            "-    data = obj.to_dict()",
            "+    data = obj.serialize()"
          ]
        },
        {
          "id": "H89_hh0359",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_product_method():",
            "-    result = obj.get_price()",
            "+    result = obj.unit_price()"
          ]
        },
        {
          "id": "H90_hh035a",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_find():",
            "-    obj = Product.find_by_id(1)",
            "+    obj = Product.get_by_id(1)"
          ]
        }
      ]
    },
    {
      "file_path": "tests/test_order.py",
      "hunks": [
        {
          "id": "H91_hh035b",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel, Order",
            "+from models import Entity, Order"
          ]
        },
        {
          "id": "H92_hh035c",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_model_creation():",
            "-    assert isinstance(obj, BaseModel)",
            "+    assert isinstance(obj, Entity)"
          ]
        },
        {
          "id": "H93_hh035d",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_serialization():",
            "-    data = obj.to_dict()",
            "+    data = obj.serialize()"
          ]
        },
        {
          "id": "H94_hh035e",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_order_method():",
            "-    result = obj.get_total()",
            "+    result = obj.compute_total()"
          ]
        },
        {
          "id": "H95_hh035f",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_find():",
            "-    obj = Order.find_by_id(1)",
            "+    obj = Order.get_by_id(1)"
          ]
        },
        {
          "id": "H96_hh0360",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from services.order import calculate_invoice",
            "+from services.order import generate_invoice"
          ]
        }
      ]
    },
    {
      "file_path": "tests/test_category.py",
      "hunks": [
        {
          "id": "H97_hh0361",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel, Category",
            "+from models import Entity, Category"
          ]
        },
        {
          "id": "H98_hh0362",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_model_creation():",
            "-    assert isinstance(obj, BaseModel)",
            "+    assert isinstance(obj, Entity)"
          ]
        },
        {
          "id": "H99_hh0363",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_serialization():",
            "-    data = obj.to_dict()",
            "+    data = obj.serialize()"
          ]
        },
        {
          "id": "H100_hh0364",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_category_method():",
            "-    result = obj.get_path()",
            "+    result = obj.full_path()"
          ]
        },
        {
          "id": "H101_hh0365",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_find():",
            "-    obj = Category.find_by_id(1)",
            "+    obj = Category.get_by_id(1)"
          ]
        }
      ]
    },
    {
      "file_path": "tests/test_api_views.py",
      "hunks": [
        {
          "id": "H102_hh0366",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H103_hh0367",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from api.decorators import api_view",
            "+from api.decorators import endpoint"
          ]
        },
        {
          "id": "H104_hh0368",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_view_decorator():",
            "-    assert hasattr(list_users, '_api_view')",
            "+    assert hasattr(list_users, '_endpoint')"
          ]
        },
        {
          "id": "H105_hh0369",
          "header": "@@ -10,5 +10,8 @@",
          "lines": [
            " def test_view_response():",
            "-    obj = User.find_by_id(1)",
            "-    data = obj.to_dict()",
            "+    obj = User.get_by_id(1)",
            "+    data = obj.serialize()"
          ]
        }
      ]
    },
    {
      "file_path": "tests/test_services.py",
      "hunks": [
        {
          "id": "H106_hh036a",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H107_hh036b",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from services.auth import validate_session",
            "+from services.auth import verify_session"
          ]
        },
        {
          "id": "H108_hh036c",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from services.billing import calculate_invoice",
            "+from services.billing import generate_invoice"
          ]
        },
        {
          "id": "H109_hh036d",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_auth_service():",
            "-    validate_session(user)",
            "+    verify_session(user)"
          ]
        },
        {
          "id": "H110_hh036e",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_billing_service():",
            "-    calculate_invoice(order)",
            "+    generate_invoice(order)"
          ]
        }
      ]
    },
    {
      "file_path": "tests/test_serializers.py",
      "hunks": [
        {
          "id": "H111_hh036f",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H112_hh0370",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_user_serializer():",
            "-    result = serializer.format(user)",
            "+    result = serializer.render(user)"
          ]
        },
        {
          "id": "H113_hh0371",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_product_serializer():",
            "-    result = serializer.format(product)",
            "+    result = serializer.render(product)"
          ]
        },
        {
          "id": "H114_hh0372",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_serializer_base_type():",
            "-    assert serializer.accepts(BaseModel)",
            "+    assert serializer.accepts(Entity)"
          ]
        }
      ]
    },
    {
      "file_path": "tests/test_cli.py",
      "hunks": [
        {
          "id": "H115_hh0373",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models import BaseModel",
            "+from models import Entity"
          ]
        },
        {
          "id": "H116_hh0374",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "-from models.mixins import TimestampMixin",
            "+from models.mixins import AuditMixin"
          ]
        },
        {
          "id": "H117_hh0375",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_import_touches_timestamps():",
            "-    assert issubclass(Order, TimestampMixin)",
            "+    assert issubclass(Order, AuditMixin)"
          ]
        },
        {
          "id": "H118_hh0376",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            " def test_import_subclasses():",
            "-    subs = BaseModel.__subclasses__()",
            "+    subs = Entity.__subclasses__()"
          ]
        }
      ]
    },
    {
      "file_path": "migrations/rename_basemodel_table.py",
      "hunks": [
        {
          "id": "H119_hh0377",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "+# Migration 1: rename_basemodel_table",
            "+def upgrade():",
            "+    op.rename_table('basemodel', 'entity')"
          ]
        }
      ]
    },
    {
      "file_path": "migrations/update_constraints.py",
      "hunks": [
        {
          "id": "H120_hh0378",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "+# Migration 2: update_constraints",
            "+def upgrade():",
            "+    op.alter_column('entity', 'updated')"
          ]
        }
      ]
    },
    {
      "file_path": "migrations/add_audit_columns.py",
      "hunks": [
        {
          "id": "H121_hh0379",
          "header": "@@ -6,5 +6,8 @@",
          "lines": [
            "+# Migration 3: add_audit_columns",
            "+def upgrade():",
            "+    op.alter_column('entity', 'updated')"
          ]
        }
      ]
    },
    {
      "file_path": "features/export.py",
      "hunks": [
        {
          "id": "H122_hh037a",
          "header": "@@ -8,5 +8,8 @@",
          "lines": [
            "+from models import Entity",
            "+",
            "+def export_all(model_class: type[Entity]) -> list[dict]:",
            "+    return [obj.serialize() for obj in model_class.query.all()]"
          ]
        }
      ]
    },
    {
      "file_path": "features/bulk_import.py",
      "hunks": [
        {
          "id": "H123_hh037b",
          "header": "@@ -12,5 +12,8 @@",
          "lines": [
            "+from models import Entity",
            "+",
            "+def bulk_import(model_class: type[Entity], data: list[dict]):",
            "+    for item in data:",
            "+        obj = model_class(**item)",
            "+        db.session.add(obj)"
          ]
        }
      ]
    },
    {
      "file_path": "docs/models.md",
      "hunks": [
        {
          "id": "H124_hh037c",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "+## Entity Base Class",
            "+All models now inherit from `Entity` instead of `BaseModel`."
          ]
        }
      ]
    },
    {
      "file_path": "pyproject.toml",
      "hunks": [
        {
          "id": "H125_hh037d",
          "header": "@@ -4,5 +4,8 @@",
          "lines": [
            "+[tool.pytest.ini_options]",
            "+testpaths = [\"tests\"]"
          ]
        }
      ]
    }
  ],
  "file_relationships": [
    {
      "source": "serializers/user_serializer.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "serializers/user_serializer.py",
      "target": "models/user.py",
      "kind": "direct"
    },
    {
      "source": "serializers/product_serializer.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "serializers/product_serializer.py",
      "target": "models/product.py",
      "kind": "direct"
    },
    {
      "source": "serializers/order_serializer.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "serializers/order_serializer.py",
      "target": "models/order.py",
      "kind": "direct"
    },
    {
      "source": "serializers/category_serializer.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "serializers/category_serializer.py",
      "target": "models/category.py",
      "kind": "direct"
    },
    {
      "source": "api/views/users.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "api/views/users.py",
      "target": "api/decorators.py",
      "kind": "direct"
    },
    {
      "source": "api/views/products.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "api/views/products.py",
      "target": "api/decorators.py",
      "kind": "direct"
    },
    {
      "source": "api/views/orders.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "api/views/orders.py",
      "target": "api/decorators.py",
      "kind": "direct"
    },
    {
      "source": "api/views/admin.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "api/views/admin.py",
      "target": "api/decorators.py",
      "kind": "direct"
    },
    {
      "source": "api/views/search.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "api/views/search.py",
      "target": "api/decorators.py",
      "kind": "direct"
    },
    {
      "source": "api/views/reports.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "api/views/reports.py",
      "target": "api/decorators.py",
      "kind": "direct"
    },
    {
      "source": "services/auth.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "services/billing.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "services/shipping.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "services/analytics.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "services/notifications.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "cli/import_cmd.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "cli/import_cmd.py",
      "target": "models/mixins.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_user.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_user.py",
      "target": "models/user.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_product.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_product.py",
      "target": "models/product.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_order.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_order.py",
      "target": "models/order.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_category.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_category.py",
      "target": "models/category.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_api_views.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_api_views.py",
      "target": "api/decorators.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_services.py",
      "target": "services/auth.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_services.py",
      "target": "services/billing.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_services.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_serializers.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_serializers.py",
      "target": "serializers/user_serializer.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_cli.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_cli.py",
      "target": "models/mixins.py",
      "kind": "direct"
    },
    {
      "source": "tests/test_cli.py",
      "target": "cli/import_cmd.py",
      "kind": "direct"
    },
    {
      "source": "features/export.py",
      "target": "models/base.py",
      "kind": "direct"
    },
    {
      "source": "features/bulk_import.py",
      "target": "models/base.py",
      "kind": "direct"
    }
  ],
  "must_be_together": [
    [
      "api/decorators.py",
      "api/views/admin.py",
      "api/views/orders.py",
      "api/views/products.py",
      "api/views/reports.py",
      "api/views/search.py",
      "api/views/users.py",
      "cli/import_cmd.py",
      "models/__init__.py",
      "models/base.py",
      "models/category.py",
      "models/mixins.py",
      "models/order.py",
      "models/product.py",
      "models/user.py",
      "serializers/category_serializer.py",
      "serializers/order_serializer.py",
      "serializers/product_serializer.py",
      "serializers/user_serializer.py",
      "services/analytics.py",
      "services/auth.py",
      "services/billing.py",
      "services/notifications.py",
      "services/shipping.py",
      "tests/test_api_views.py",
      "tests/test_category.py",
      "tests/test_cli.py",
      "tests/test_order.py",
      "tests/test_product.py",
      "tests/test_serializers.py",
      "tests/test_services.py",
      "tests/test_user.py"
    ]
  ],
  "must_be_ordered": [
    [
      "models/base.py",
      "features/export.py"
    ],
    [
      "models/base.py",
      "features/bulk_import.py"
    ]
  ],
  "hunk_to_file": {
    "H1_hh0301": "models/base.py",
    "H2_hh0302": "models/base.py",
    "H3_hh0303": "models/base.py",
    "H4_hh0304": "models/mixins.py",
    "H5_hh0305": "models/mixins.py",
    "H6_hh0306": "models/user.py",
    "H7_hh0307": "models/user.py",
    "H8_hh0308": "models/user.py",
    "H9_hh0309": "models/user.py",
    "H10_hh030a": "models/product.py",
    "H11_hh030b": "models/product.py",
    "H12_hh030c": "models/product.py",
    "H13_hh030d": "models/order.py",
    "H14_hh030e": "models/order.py",
    "H15_hh030f": "models/order.py",
    "H16_hh0310": "models/order.py",
    "H17_hh0311": "models/order.py",
    "H18_hh0312": "models/category.py",
    "H19_hh0313": "models/category.py",
    "H20_hh0314": "models/category.py",
    "H21_hh0315": "models/__init__.py",
    "H22_hh0316": "models/__init__.py",
    "H23_hh0317": "models/__init__.py",
    "H24_hh0318": "serializers/user_serializer.py",
    "H25_hh0319": "serializers/user_serializer.py",
    "H26_hh031a": "serializers/user_serializer.py",
    "H27_hh031b": "serializers/product_serializer.py",
    "H28_hh031c": "serializers/product_serializer.py",
    "H29_hh031d": "serializers/product_serializer.py",
    "H30_hh031e": "serializers/order_serializer.py",
    "H31_hh031f": "serializers/order_serializer.py",
    "H32_hh0320": "serializers/order_serializer.py",
    "H33_hh0321": "serializers/category_serializer.py",
    "H34_hh0322": "serializers/category_serializer.py",
    "H35_hh0323": "serializers/category_serializer.py",
    "H36_hh0324": "serializers/__init__.py",
    "H37_hh0325": "api/views/users.py",
    "H38_hh0326": "api/views/users.py",
    "H39_hh0327": "api/views/users.py",
    "H40_hh0328": "api/views/users.py",
    "H41_hh0329": "api/views/products.py",
    "H42_hh032a": "api/views/products.py",
    "H43_hh032b": "api/views/products.py",
    "H44_hh032c": "api/views/products.py",
    "H45_hh032d": "api/views/orders.py",
    "H46_hh032e": "api/views/orders.py",
    "H47_hh032f": "api/views/orders.py",
    "H48_hh0330": "api/views/orders.py",
    "H49_hh0331": "api/views/admin.py",
    "H50_hh0332": "api/views/admin.py",
    "H51_hh0333": "api/views/admin.py",
    "H52_hh0334": "api/views/admin.py",
    "H53_hh0335": "api/views/search.py",
    "H54_hh0336": "api/views/search.py",
    "H55_hh0337": "api/views/search.py",
    "H56_hh0338": "api/views/search.py",
    "H57_hh0339": "api/views/reports.py",
    "H58_hh033a": "api/views/reports.py",
    "H59_hh033b": "api/views/reports.py",
    "H60_hh033c": "api/views/reports.py",
    "H61_hh033d": "api/decorators.py",
    "H62_hh033e": "services/auth.py",
    "H63_hh033f": "services/auth.py",
    "H64_hh0340": "services/auth.py",
    "H65_hh0341": "services/billing.py",
    "H66_hh0342": "services/billing.py",
    "H67_hh0343": "services/billing.py",
    "H68_hh0344": "services/shipping.py",
    "H69_hh0345": "services/shipping.py",
    "H70_hh0346": "services/shipping.py",
    "H71_hh0347": "services/analytics.py",
    "H72_hh0348": "services/analytics.py",
    "H73_hh0349": "services/analytics.py",
    "H74_hh034a": "services/notifications.py",
    "H75_hh034b": "services/notifications.py",
    "H76_hh034c": "services/notifications.py",
    "H77_hh034d": "cli/import_cmd.py",
    "H78_hh034e": "cli/import_cmd.py",
    "H79_hh034f": "cli/import_cmd.py",
    "H80_hh0350": "tests/test_user.py",
    "H81_hh0351": "tests/test_user.py",
    "H82_hh0352": "tests/test_user.py",
    "H83_hh0353": "tests/test_user.py",
    "H84_hh0354": "tests/test_user.py",
    "H85_hh0355": "tests/test_user.py",
    "H86_hh0356": "tests/test_product.py",
    "H87_hh0357": "tests/test_product.py",
    "H88_hh0358": "tests/test_product.py",
    "H89_hh0359": "tests/test_product.py",
    "H90_hh035a": "tests/test_product.py",
    "H91_hh035b": "tests/test_order.py",
    "H92_hh035c": "tests/test_order.py",
    "H93_hh035d": "tests/test_order.py",
    "H94_hh035e": "tests/test_order.py",
    "H95_hh035f": "tests/test_order.py",
    "H96_hh0360": "tests/test_order.py",
    "H97_hh0361": "tests/test_category.py",
    "H98_hh0362": "tests/test_category.py",
    "H99_hh0363": "tests/test_category.py",
    "H100_hh0364": "tests/test_category.py",
    "H101_hh0365": "tests/test_category.py",
    "H102_hh0366": "tests/test_api_views.py",
    "H103_hh0367": "tests/test_api_views.py",
    "H104_hh0368": "tests/test_api_views.py",
    "H105_hh0369": "tests/test_api_views.py",
    "H106_hh036a": "tests/test_services.py",
    "H107_hh036b": "tests/test_services.py",
    "H108_hh036c": "tests/test_services.py",
    "H109_hh036d": "tests/test_services.py",
    "H110_hh036e": "tests/test_services.py",
    "H111_hh036f": "tests/test_serializers.py",
    "H112_hh0370": "tests/test_serializers.py",
    "H113_hh0371": "tests/test_serializers.py",
    "H114_hh0372": "tests/test_serializers.py",
    "H115_hh0373": "tests/test_cli.py",
    "H116_hh0374": "tests/test_cli.py",
    "H117_hh0375": "tests/test_cli.py",
    "H118_hh0376": "tests/test_cli.py",
    "H119_hh0377": "migrations/rename_basemodel_table.py",
    "H120_hh0378": "migrations/update_constraints.py",
    "H121_hh0379": "migrations/add_audit_columns.py",
    "H122_hh037a": "features/export.py",
    "H123_hh037b": "features/bulk_import.py",
    "H124_hh037c": "docs/models.md",
    "H125_hh037d": "pyproject.toml"
  }
}